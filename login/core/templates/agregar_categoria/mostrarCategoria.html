{% load static %}
<!-- mostrar_categoria.html

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mostrar Categorías</title>
</head>
<body>
    <h1>Categorías y Productos</h1>
    <ul>
        {% for categoria in categorias %}
            <li>{{ categoria.nombre }}</li>
            <ul>
                {% for producto in categoria.productos.all %}
                    <li>{{ producto.nombre }}</li>
                {% endfor %}
            </ul>
            <a href="{% url 'bajarCategoria' categoria.id %}">Eliminar</a>
        {% endfor %}
    </ul>
</body>
</html>
 -->


 <!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" type="text/css" href="{% static 'css/estiloCategoria.css' %}">
     <title>Mostrar Categorías</title>
     <style>
         /* Estilos personalizados */
         body {
             position: relative;
         }
         h1 {
             text-align: center; /* Centra el título */
             margin-bottom: 20px; /* Añade espacio entre el título y el contenido */
         }
         .categoria-lista {
             list-style: none; /* Quita los puntos de la lista */
             padding: 0; /* Quita el espacio interno de la lista */
             margin: 0; /* Quita el espacio externo de la lista */
         }
         .categoria-item {
             border: 1px solid #ccc; /* Añade un borde alrededor de cada categoría */
             border-radius: 5px; /* Añade esquinas redondeadas */
             margin-bottom: 10px; /* Añade espacio entre cada categoría */
             padding: 10px; /* Añade espacio interno a cada categoría */
             position: relative; /* Permite alinear el botón al centro */
         }
         .categoria-nombre {
             font-weight: bold; /* Hace que el nombre de la categoría sea negrita */
         }
         .producto-lista {
             padding-left: 20px; /* Añade un poco de espacio a la izquierda para los productos */
         }
         .producto-item {
             margin-top: 5px; /* Añade espacio entre cada producto */
         }
         .eliminar-btn {
             
             color: #ec8888; /* Color del texto blanco */
             padding: 10px 10px; /* Ajusta el espaciado del botón */
             border-radius: 5px; /* Añade esquinas redondeadas al botón */
             cursor: pointer; /* Cambia el cursor al pasar sobre el botón */
             position: absolute; /* Posición absoluta para centrar el botón */
             bottom: 0px; /* Espacio desde la parte inferior */
             left: 50%; /* Alinea el botón al centro horizontal */
             transform: translateX(-50%); /* Centra el botón horizontalmente */
         }
         .eliminar-btn:hover {
             background-color: #b8aeae; /* Color de fondo más oscuro al pasar el ratón */
         }
         #volver {
             position: fixed; /* Cambiamos a fixed para que permanezca en la misma posición al hacer scroll */
             top: 10px;
             left: 10px;
             background-color: transparent;
             border: none;
             color: black;
             font-size: 18px;
             font-weight: bold;
             cursor: pointer;
         }
 
         /* Estilos para los mensajes */
         .messages-container {
             width: 100%;
             box-sizing: border-box;
             padding-bottom: 20px; /* Aumenta el espacio para los mensajes */
             text-align: center; /* Centra el contenido del contenedor */
         }
         
         .messages {
             list-style: none;
             padding: 0;
             margin: 0;
             background-color: rgba(255, 0, 0, 0.2); /* Fondo semitransparente para los mensajes */
             font-size: 20px;
             color: red;
             display: inline-block; /* Hace que el contenedor se ajuste automáticamente a su contenido */
             border-radius: 5px; /* Añade esquinas redondeadas al contenedor */
         }
         
         .messages li {
             margin-bottom: 10px;
         }
     </style>
     <script>
        function confirmarBaja(categoriaId) {
            var confirmacion = confirm("¿Estás seguro de que deseas eliminar categoría?");
            if (confirmacion) {
                document.getElementById("formulario" + categoriaId).submit();
            }
        }        
    </script>
 </head>
 <body>
     <h1>Categorías y Productos</h1>
     
     <!-- Listado de categorías -->
     <ul class="categoria-lista">
        {% for categoria in categorias %}
            <li class="categoria-item">
                <span class="categoria-nombre">{{ categoria.nombre }}</span>
                <!-- Utiliza <details> para ocultar los productos inicialmente -->
                <form id="formulario{{ categoria.id }}" method="POST" action="{% url 'bajarCategoria' categoria.id %}">
                    {% csrf_token %}
                    <button type="button" class="eliminar-btn" onclick="confirmarBaja({{ categoria.id }})">Eliminar</button>
                </form>
            </li>
        {% endfor %}
    </ul>
    
 
     <!-- Botón Volver -->
     <a href="{% url 'home' %}" id="volver" style="text-decoration: none; color: black;">
         &larr; Volver
     </a>
    
     <!-- Bloque condicional para mostrar mensajes de Django -->
     {% if messages %}
         <ul class="messages">
             {% for message in messages %}
                 <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
             {% endfor %}
         </ul>
     {% endif %}
 </body>
 </html>
 